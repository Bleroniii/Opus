<!-- Main -->
<div class="flex flex-col flex-auto items-center p-6 sm:p-10">
    <div class="flex flex-col w-full max-w-4xl">
        <div
            class="mt-2 text-4xl sm:text-7xl font-extrabold tracking-tight leading-tight"
        >
            Posts
        </div>
        <!-- Form -->
        <div
            class="mt-8 sm:mt-12 p-6 pb-7 sm:p-10 sm:pb-7 shadow rounded-2xl bg-card"
        >
            <!-- Alert -->
            <fuse-alert
                class="mb-8"
                *ngIf="alert"
                [type]="alert.type"
                [showIcon]="false"
            >
                {{ alert.message }}
            </fuse-alert>
            <form
                class="space-y-3"
                [formGroup]="supportForm"
                #supportNgForm="ngForm"
            >
                <mat-form-field class="fuse-mat-textarea w-full">
                    <textarea
                        matInput
                        [formControlName]="'description'"
                        [required]="true"
                        [rows]="5"
                        matTextareaAutosize
                    ></textarea>
                    <mat-label>Message</mat-label>
                    <mat-error
                        *ngIf="
                            supportForm.get('description').hasError('required')
                        "
                    >
                        Required
                    </mat-error>
                </mat-form-field>

                <input
                    type="file"
                    name="file"
                    id="file"
                    (change)="onFileChange($event.target.files)"
                />

                <!-- Actions -->
                <div class="flex items-center justify-end">
                    <button
                        mat-button
                        [color]="'accent'"
                        [disabled]="
                            supportForm.pristine || supportForm.untouched
                        "
                        (click)="clearForm()"
                    >
                        Clear
                    </button>
                    <button
                        class="ml-2"
                        mat-flat-button
                        [color]="'primary'"
                        [disabled]="supportForm.pristine || supportForm.invalid"
                        (click)="sendForm()"
                    >
                        Submit
                    </button>
                </div>
            </form>
        </div>

        <div
            class="messages text-4xl sm:text-7xl font-extrabold tracking-tight leading-tight"
        >
            Latest Posts
        </div>
    </div>
</div>
<div class="flex flex-col flex-auto items-center p-6 sm:p-10 pt-0">
    <div class="flex flex-col w-full max-w-4xl">
        <p *ngIf="!departmentPosts$ | async" class="text-center">
            No posts yet
        </p>

        <div
            *ngIf="departmentPosts$ | async as Posts"
            class="mt-8 sm:mt-12 p-6 pb-7 sm:p-10 sm:pb-7 shadow rounded-2xl bg-card"
        >
            <div *ngFor="let post of Posts" class="post_section">
                <div class="row">
                    <div class="col-1">
                        <img
                            src="../../../../../assets/images/avatars/female-01.jpg"
                            alt=""
                            class="image"
                        />
                    </div>
                    <div class="col-11">
                        <h1 class="name">Name Surname</h1>
                        <p class="mb-3 date">
                            {{ post.created_at | date: "fullDate" }}
                        </p>
                    </div>
                </div>

                <p class="description">{{ post.description }}</p>
                <hr />
                <div class="row file">
                    <img
                        *ngIf="post.file"
                        src="{{ apiUrl }}storage/{{ post.file }}"
                        alt="image"
                    />
                </div>
                <div class="row">
                    <div class="col-8">
                            <p class="like-text">{{numberOfLikes}}</p>
                            <mat-icon (click)="likeButtonClick()"
                            svgIcon="heroicons_outline:thumb-up"
                            ></mat-icon>
                            <mat-icon svgIcon="heroicons_solid:thumb-up" (click)="dislikeButtonClick()"></mat-icon>
                    </div>
                    <div class="col-4">
                        <p (click)="toggleDisplayDivIf()" class="comments">Show comments</p>
                    </div>
                </div>
                <hr />

                <div class="row " *ngIf="!isShowDivIf">
                    <div class="col-1">
                        <img
                            src="../../../../../assets/images/avatars/female-01.jpg"
                            alt=""
                            class="image-2 mt-3"
                        />
                    </div>
                    <div class="col-10">
                        <div class="box">
                            <h1 class="fw-bold p-2">Name Surname</h1>
                            <p class="descriptioni">{{ post.description }}</p>
                        </div>
                        <p class="mt-1 ms-2 date">
                            {{ post.created_at | date: "fullDate" }}
                        </p>
                    </div>
                    <div class="col-1">
                        <button class="mt-3" mat-button [color]="''">
                            <b>x</b>
                        </button>
                    </div>
                </div>

                <div class="row" *ngIf="!isShowDivIf">
                    <div class="col-1">
                        <img
                            src="../../../../../assets/images/avatars/female-01.jpg"
                            alt=""
                            class="image-2 mt-3"
                        />
                    </div>
                    <div class="col-10">
                        <div class="box">
                            <h1 class="fw-bold p-2">Name Surname</h1>
                            <p class="descriptioni">{{ post.description }}</p>
                        </div>
                        <p class="mt-1 ms-2 date">
                            {{ post.created_at | date: "fullDate" }}
                        </p>
                    </div>
                    <div class="col-1">
                        <button class="mt-3" mat-button [color]="''">
                            <b>x</b>
                        </button>
                    </div>
                </div>

                <div class="row">
                    <div class="col-10 textarea">
                        <mat-form-field class="fuse-mat-textarea w-full mt-4">
                            <textarea
                                matInput
                                [formControlName]="'comment'"
                                [rows]="1"
                                [placeholder]="'Write a comment...'"
                                matTextareaAutosize
                            ></textarea>
                        </mat-form-field>
                    </div>
                    <div class="col-2 post">
                        <button
                            class="post-button"
                            mat-raised-button 
                            [color]="'primary'"
                        >
                            <b>Post</b>
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
